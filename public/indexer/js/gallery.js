/**
 * <gallery-mode-plugin>
 * 
 * A plugin for <eyy-indexer> [https://github.com/sixem/eyy-indexer]
 * 
 * Licensed under GPL-3.0
 * @author   emy [admin@eyy.co]
 * @version  0.2 (1.1.2)
 */

"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,a=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(e){e.fn.gallery=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={data:{busy:!1,scrollbreak:!1,isChrome:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}};i.settings=e.extend({extensions:{image:["jpg","jpeg","gif","png","ico","svg","bmp"],video:["mp4","webm"]},console:!0,blur:!0,filter:!0,start:0,fade:0,mobile:!1,scroll_interval:35,reverse_options:!0},i.settings,n),i.loadImage=function(e){return new Promise(function(t,n){var i=new Image;i.addEventListener("load",function(n){return t(e)}),i.addEventListener("error",function(){n(new Error("failed to load image URL: ".concat(e)))}),i.src=e})},i.getExtension=function(e){return e.split(".").pop().toLowerCase()},i.getObjectSet=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e(n.filter(function(e){return void 0!==e}).map(function(t){return e(t)}))},i.filterItems=function(e){return e.filter(function(e,t){return i.isImage(e.name)||i.isVideo(e.name)})},i.isImage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.settings.extensions.image.includes(t||i.getExtension(e))},i.isVideo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.settings.extensions.video.includes(t||i.getExtension(e))},i.getScrollBarWidth=function(){if(e("body").height()<e(window).height())return 0;var t=e("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),n=e("<div>").css({width:"100%"}).appendTo(t).outerWidth();return t.remove(),100-n},i.limitBody=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=e("body"),a=i.getScrollBarWidth();!0===t?(i.data.body={"max-height":n.css("max-height"),width:n.css("width"),overflow:n.css("overflow")},a>0&&n.find("> table").css({width:i.data.isChrome?"100%":"calc(100% - "+a+"px)","padding-right":a+"px"}),n.css({"max-height":"calc(100vh - var(--gallery-top-bar-height))",overflow:"hidden"})):(i.data.hasOwnProperty("body")&&n.css({"max-height":i.data.body["max-height"],width:"unset",overflow:i.data.body.overflow}),n.find("> table").css({width:"100%","padding-right":"unset"}))},i.exists=function(){return i.container=e("div.gallery-container"),i.container.length>0},i.show=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n&&(i.settings.console&&console.log("itemsUpdate",!0),i.data.selected.index=null,i.items=i.settings.filter?i.filterItems(n):n,i.populateTable(i.items)),!0===e?(i.bind().show(),t!==i.data.selected.index&&(i.container.find(".media .wrapper img, .media .wrapper video").hide(),i.navigate(t)),i.container.find(".list").scrollTo(i.container.find("> .list").find("tr").eq(t))):(i.unbind(i.data.bound),i.container.hide()),i.settings.blur&&(i.setBlur(e),i.limitBody(e));var a=i.container.find(".media .wrapper video");a.length>0&&(!0===e&&a.is(":visible")?(a[0].currentTime=0,a[0].muted=!1,a[0].play()):!1===e&&(a[0].muted=!0,a[0].pause()))},i.data.busy=null,i.data.busy_handle=null,i.tick=function(e){var t=parseInt(e.attr("data-tick"));return e.text("Loading "+".".repeat(t)).attr("data-tick",t>=3?1:t+1),e},i.busy=function(t){if(void 0!==t){i.data.busy=t;var n=i.container.find(".media .loader");e(n)[0].hasAttribute("data-tick")||e(n).attr("data-tick",1),t?(n.is(":hidden")&&n.stop().fadeIn(400),i.data.busy_handle=setInterval(function(){return i.tick(n)},225)):(n.is(":visible")&&n.stop().fadeOut(200,function(){return n.attr("data-tick",1).text("Loading .")}),i.data.busy||clearInterval(i.data.busy_handle))}return i.data.busy},i.populateTable=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t&&(t=i.container.find(".list table")),t.html(""),e.forEach(function(e){return t.append('<tr title="'.concat(e.name,'"><td>').concat(e.name,"</td></tr>"))}),t},i.hideExisting=function(e){var t=i.container.find(e).hide();return t.length>0?t:null},i.setBlur=function(){return!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])?i.data.blurred=e("body > *:not(.gallery-container):not(script):not(noscript):not(style)").addClass("blur"):i.data.hasOwnProperty("blurred")&&i.data.blurred.removeClass("blur"),i},i.getReverseOptions=function(e){return{Google:"https://www.google.com/searchbyimage?image_url="+(e=encodeURIComponent(document.location.origin+e))+"&safe=off",Yandex:"https://www.yandex.com/images/search?rpt=imageview&img_url="+e,IQDB:"https://iqdb.org/?url="+e}},i.reverse=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!i.settings.reverse_options)return!1;if(0===i.container.find(".content-container .media .wrapper .cover").length)return!1;var r=i.container.find(".content-container .media .reverse");if(0===r.length&&(r=e("<div/>",{class:"reverse"}).appendTo(i.container.find(".content-container .media .wrapper .cover"))),!1!==n){var o=i.getReverseOptions(i.data.selected.src);r.html(Object.keys(o).map(function(e){return'<a class="reverse-link" target="_blank" href="'.concat(o[e],'">').concat(e,"</a>")}).join("|")),r.is(":hidden")&&r.show()}else a>0?r.stop().fadeOut(a):r.hide()},i.shortenString=function(e,t){return t=t||28,e.length>t?[e.substr(0,Math.floor(t/2-2)),e.substr(e.length-Math.floor(t/2-2),e.length)].join(" .. "):e},i.setItemInfo=function(e,t,n){i.settings.console&&console.log("itemSet",e);var a=i.settings.mobile?i.shortenString(e.name,30):e.name;i.container.find(".bar > .right > a.download").attr("filename",e.name).attr("href",e.url).attr("title","Download: ".concat(e.name)),i.container.find(".bar > .left").html("<span>".concat(t+1," of ").concat(n,"</span>")+' | <a href="'.concat(e.url,'">').concat(a,"</a>")+(e.hasOwnProperty("size")&&!i.settings.mobile?" | <span>".concat(e.size,"</span>"):""))},i.isScrolledIntoView=function(t,n){var i=t.offset().top-e(window).scrollTop();return!(i<n)&&!(i+t.outerHeight()>e(window).height())},i.scrollIntoView=function(e,t){t.stop().animate({scrollTop:e.offset().top-t.offset().top},0)},i.calculateIndex=function(e,t,n){var a=e+t;return a>n&&(a=a-n-1),a<0&&(a=n-(Math.abs(a)-1)),a<0||a>n?i.calculateIndex(e,n-a,n):a},i.createVideo=function(t){var n=e("<video/>",{controls:"",autoplay:"",loop:""});return[n,e("<source>",{type:"video/"+t,src:""}).appendTo(n)]},i.showItem=function(e,t,n,a,r){var o,l,s;o=i.container.find(".media .wrapper");var d=function(){if(i.container.find(".content-container .media .reverse"),0===e)t.show().attr("src",n),(l=i.container.find(".media .wrapper video")).length>0&&(l[0].pause(),l.find("source").attr("src",""));else if(1===e){if(!1!==a||i.data.isChrome)s=t.find("source"),l=t;else{t.remove();var d=_slicedToArray(i.createVideo(i.data.selected.ext),2);l=d[0],s=d[1],l.appendTo(o)}s.attr("src",n),l.show(),l[0].load()}i.container.find(".media .wrapper ".concat(0===e?"video":"img")).hide(),i.settings.fade>0?o.stop().fadeIn(i.settings.fade):o.show(),i.data.selected.index=r};i.settings.fade>0?o.stop().fadeOut(i.settings.fade,function(){d()}):d(),i.busy(!1)},i.navigate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i.settings.console&&console.log("busyState",i.busy()),i.busy())return!1;var a=i.items.length-1;if(null===t&&(t=i.data.selected.index),null!==n&&(t=i.calculateIndex(t,n,a)),i.data.selected.index!==t&&!0!==i.busy()){var r=i.items[t];i.setItemInfo(r,t,a+1),i.data.selected.src=r.url,i.data.selected.ext=i.getExtension(r.name);var o,l,s,d=i.container.find(".list"),c=d.find("table"),u=c.find("tr").eq(t);if(c.find("tr.selected").removeAttr("class"),u.attr("class","selected"),i.isScrolledIntoView(u,Math.floor(i.container.find(".bar").outerHeight()-4))||d.scrollTo(u),i.isImage(null,i.data.selected.ext)){if(i.busy(!0),l=i.container.find(".media .wrapper img"),o=i.container.find(".media .wrapper video"),s=0===l.length,o.length>0&&o[0].pause(),!0===s){var g=e("<div/>",{class:"cover"}).prependTo(i.container.find(".media .wrapper"));l=e("<img>").prependTo(g)}return i.loadImage(r.url).then(function(e){i.data.selected.src===e&&i.showItem(0,l,e,s,t)}).catch(function(e){i.busy(!1),console.error(e)}),!0}if(i.isVideo(null,i.data.selected.ext)){if(i.busy(!0),o=i.container.find(".media .wrapper video"),s=0===o.length){var v=_slicedToArray(i.createVideo(i.data.selected.ext),2);o=v[0],v[1],o.appendTo(i.container.find(".media .wrapper"))}return i.showItem(1,o,r.url,s,t),!0}}},i.data.key_prevent=[33,34,37,38,39,40,71],i.handleKey=function(e,t){i.settings.console&&console.log("handleKey",e),27===e?i.show(!1):40===e||34===e||39===e?i.navigate(null,1):38!==e&&33!==e&&37!==e||i.navigate(null,-1),t(i.data.key_prevent.includes(e))},i.unbind=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.forEach(function(t){if(t.hasOwnProperty("direct")&&!0===t.direct)return e(t.trigger).off(t.event),!0;t.trigger?e(document).off(t.event,t.trigger):e(document).off(t.event)}),!0===n&&e(i).trigger("unbound",!0)},i.scrollBreak=function(){i.data.scrollbreak=!1},i.bind=function(){return i.data.bound=[{event:"click",trigger:"div.gallery-container .list table tr"},{event:"click",trigger:'div.gallery-container [data-action="close"]'},{event:"click",trigger:'div.gallery-container [data-action="toggle"]'},{event:"click",trigger:'div.gallery-container [data-action="previous"]'},{event:"click",trigger:'div.gallery-container [data-action="next"]'},{event:"click",trigger:"div.gallery-container .media"},{event:"DOMMouseScroll mousewheel",trigger:"div.gallery-container .media"},{event:"mouseover",trigger:"div.gallery-container .media .wrapper img"},{event:"mouseleave",trigger:"div.gallery-container .media .wrapper img"},{event:"mouseleave",trigger:"div.gallery-container .media .reverse a"},{event:"swipeleft",trigger:"div.gallery-container",direct:!0},{event:"swiperight",trigger:"div.gallery-container",direct:!0},{event:"keydown",trigger:null},{event:"keyup",trigger:null}],i.unbind(i.data.bound,!1),e(document).on("click",'div.gallery-container [data-action="close"]',function(e){i.show(!1)}),e(document).on("click",'div.gallery-container [data-action="toggle"]',function(t){var n=i.container.find(".list");n.is(":visible")?(n.css("display","none"),e(t.currentTarget).text("List+")):(n.css("display","table-cell"),e(t.currentTarget).text("List-"))}),e(document).on("click",'div.gallery-container [data-action="previous"]',function(e){i.navigate(null,-1)}),e(document).on("click",'div.gallery-container [data-action="next"]',function(e){i.navigate(null,1)}),e(document).on("click","div.gallery-container .list table tr",function(t){i.navigate(e(t.currentTarget).index())}),e(document).on("click","div.gallery-container .media",function(t){e(t.target).is("img, video, a")||i.show(!1)}),!0===i.settings.reverse_options&&e(document).on("mouseenter","div.gallery-container .media .wrapper .cover",function(t){i.reverse(e(t.currentTarget),!0)}),e(document).on("mouseleave","div.gallery-container .media .wrapper .cover",function(t){i.reverse(e(t.currentTarget),!1)}),!0===i.settings.mobile&&(e("div.gallery-container").on("swipeleft",function(e,t){return i.navigate(null,1)}),e("div.gallery-container").on("swiperight",function(e,t){return i.navigate(null,-1)})),e(document).on("DOMMouseScroll mousewheel","div.gallery-container .media",function(e){if(i.settings.scroll_interval>0&&!0===i.data.scrollbreak)return!1;i.navigate(null,e.originalEvent.detail>0||e.originalEvent.wheelDelta<0?1:-1),i.settings.scroll_interval>0&&(i.data.scrollbreak=!0,setTimeout(function(){return i.scrollBreak()},i.settings.scroll_interval))}),e(document).on("keydown",e.fn,function(e){i.data.key_prevent.includes(e.keyCode)&&e.preventDefault(),71===e.keyCode&&i.show(!1)}),e(document).on("keyup",e.fn,function(e){i.handleKey(e.keyCode,function(t){t&&e.preventDefault()})}),e(i).trigger("bound",!0),i.container},i.barConstruct=function(t){e("<a/>",{text:i.settings.mobile?"Save":"Download",class:"download",download:""}).appendTo(t),i.settings.mobile||e("<span/>",{"data-action":"previous",text:"Previous"}).appendTo(t),i.settings.mobile||e("<span/>",{"data-action":"next",text:"Next"}).appendTo(t),i.settings.mobile||e("<span/>",{"data-action":"toggle",text:"List-"}).appendTo(t),e("<span/>",{"data-action":"close",text:"Close"}).appendTo(t)};return i.container=e("div.gallery-container"),i.items=i.settings.filter?i.filterItems(t):t,0!==i.items.length&&(i.data.selected={src:null,ext:null,index:null,type:null},i.exists()?i.show(!0):function(t){i.limitBody(!0);var n=e("body").find("#image-preview, #video-preview");n.length>0&&n.remove(),i.container=e("<div/>",{class:"gallery-container"}).prependTo("body");var a=e("<div/>",{class:"bar"}).appendTo(i.container);e("<div/>",{class:"left"}).appendTo(a),i.barConstruct(e("<div/>",{class:"right"}).appendTo(a));var r=e("<div/>",{class:"content-container"}).appendTo(i.container),o=e("<div/>",{class:"media"}).appendTo(r),l=e("<div/>",{class:"list"}).appendTo(r);!0===i.settings.mobile&&(l.hide(),e("<span/>",{text:"<"}).appendTo(e("<div/>",{class:"screen-nav left","data-action":"previous"}).appendTo(r)),e("<span/>",{text:">"}).appendTo(e("<div/>",{class:"screen-nav right","data-action":"next"}).appendTo(r))),o.append('<div class="wrapper"></div>').append('<div class="loader">Loading ..</div>'),e("<tbody/>").appendTo(e("<table/>",{cellspacing:"0"}).appendTo(l)),i.populateTable(i.items),t(!0)}(function(){i.settings.blur&&i.setBlur(!0).bind()}),i.navigate(i.settings.start>i.items.length-1?i.items.length-1:i.settings.start),i)}}(jQuery);

/**
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * @author Ariel Flesler
 * @version 2.1.2
 */

;(function(f){"use strict";"function"===typeof define&&define.amd?define(["jquery"],f):"undefined"!==typeof module&&module.exports?module.exports=f(require("jquery")):f(jQuery)})(function($){"use strict";function n(a){return!a.nodeName||-1!==$.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"])}function h(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}var p=$.scrollTo=function(a,d,b){return $(window).scrollTo(a,d,b)};p.defaults={axis:"xy",duration:0,limit:!0};$.fn.scrollTo=function(a,d,b){"object"=== typeof d&&(b=d,d=0);"function"===typeof b&&(b={onAfter:b});"max"===a&&(a=9E9);b=$.extend({},p.defaults,b);d=d||b.duration;var u=b.queue&&1<b.axis.length;u&&(d/=2);b.offset=h(b.offset);b.over=h(b.over);return this.each(function(){function k(a){var k=$.extend({},b,{queue:!0,duration:d,complete:a&&function(){a.call(q,e,b)}});r.animate(f,k)}if(null!==a){var l=n(this),q=l?this.contentWindow||window:this,r=$(q),e=a,f={},t;switch(typeof e){case "number":case "string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e= h(e);break}e=l?$(e):$(e,q);case "object":if(e.length===0)return;if(e.is||e.style)t=(e=$(e)).offset()}var v=$.isFunction(b.offset)&&b.offset(q,e)||b.offset;$.each(b.axis.split(""),function(a,c){var d="x"===c?"Left":"Top",m=d.toLowerCase(),g="scroll"+d,h=r[g](),n=p.max(q,c);t?(f[g]=t[m]+(l?0:h-r.offset()[m]),b.margin&&(f[g]-=parseInt(e.css("margin"+d),10)||0,f[g]-=parseInt(e.css("border"+d+"Width"),10)||0),f[g]+=v[m]||0,b.over[m]&&(f[g]+=e["x"===c?"width":"height"]()*b.over[m])):(d=e[m],f[g]=d.slice&& "%"===d.slice(-1)?parseFloat(d)/100*n:d);b.limit&&/^\d+$/.test(f[g])&&(f[g]=0>=f[g]?0:Math.min(f[g],n));!a&&1<b.axis.length&&(h===f[g]?f={}:u&&(k(b.onAfterFirst),f={}))});k(b.onAfter)}})};p.max=function(a,d){var b="x"===d?"Width":"Height",h="scroll"+b;if(!n(a))return a[h]-$(a)[b.toLowerCase()]();var b="client"+b,k=a.ownerDocument||a.document,l=k.documentElement,k=k.body;return Math.max(l[h],k[h])-Math.min(l[b],k[b])};$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(a){return $(a.elem)[a.prop]()}, set:function(a){var d=this.get(a);if(a.options.interrupt&&a._last&&a._last!==d)return $(a.elem).stop();var b=Math.round(a.now);d!==b&&($(a.elem)[a.prop](b),a._last=this.get(a))}};return p});

/**
 * jquery.detectSwipe v2.1.3
 * jQuery Plugin to obtain touch gestures from iPhone, iPod Touch, iPad and Android
 * http://github.com/marcandre/detect_swipe
 * Based on touchwipe by Andreas Waltl, netCU Internetagentur (http://www.netcu.de)
 */

!function(factory){"function"==typeof define&&define.amd?
// AMD. Register as an anonymous module.
define(["jquery"],factory):"object"==typeof exports?
// Node/CommonJS
module.exports=factory(require("jquery")):
// Browser globals
factory(jQuery)}(function($){$.detectSwipe={version:"2.1.2",enabled:"ontouchstart"in document.documentElement,preventDefault:!0,threshold:125};var startX,startY,isMoving=!1;function onTouchEnd(){this.removeEventListener("touchmove",onTouchMove),this.removeEventListener("touchend",onTouchEnd),isMoving=!1}function onTouchMove(e){if($.detectSwipe.preventDefault&&e.preventDefault(),isMoving){var dir,x=e.touches[0].pageX,y=e.touches[0].pageY,dx=startX-x,dy=startY-y,ratio=window.devicePixelRatio||1;Math.abs(dx)*ratio>=$.detectSwipe.threshold?dir=dx>0?"left":"right":Math.abs(dy)*ratio>=$.detectSwipe.threshold&&(dir=dy>0?"up":"down"),dir&&(onTouchEnd.call(this),$(this).trigger("swipe",dir).trigger("swipe"+dir))}}function onTouchStart(e){1==e.touches.length&&(startX=e.touches[0].pageX,startY=e.touches[0].pageY,isMoving=!0,this.addEventListener("touchmove",onTouchMove,!1),this.addEventListener("touchend",onTouchEnd,!1))}$.event.special.swipe={setup:function(){this.addEventListener&&this.addEventListener("touchstart",onTouchStart,!1)}},$.each(["left","up","down","right"],function(){$.event.special["swipe"+this]={setup:function(){$(this).on("swipe",$.noop)}}})});